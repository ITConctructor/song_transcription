# ML design doc

![Guitar_tablature_sample.svg.png](ML%20design%20doc%202a6ab73ef2a44ed1ba6901afc98f283b/Guitar_tablature_sample.svg.png)

# Цели и предпосылки

## Зачем идем в разработку продукта?

**Бизнес-цель**:

Cоздания сервиса для автоматизации получения гитарных табулатур fingerstyle-аранжировок из аудио желаемой песни, с намерением улучшение опыта и продуктивности, расширения музыкального комьюнити интересующегося данным направлением.

Побочной целью будет создание научной статьи в сфере Music Transcription, описывающую данную задачу как с ML-ной, так и с алгоритмической стороны. Результаты исследования должны получать ранее не достигнутые результаты в сфере Music Transcription.

****Описание текущего бизнес-процесса:****

| Способы получения
табулатуры | Краткое
описание | Плюсы | Минусы |
| --- | --- | --- | --- |
| “На слух” | Музыкант многократно прослушивая аудио, подбирает мелодию, аккорды, ритм песни. | 1) Возможность составить аранжировку на любую песню .
2) Гибкий контроль над сложностью аранжировки. | 1) Наличие значительного опыта (абсолютный слух, знание нот).
2) Создание табулатуры с нуля может занять много времени |
| Нотные листы | Перенос готового нотного лист на гитарный гриф. | 1) Контроль сложности аранжировки, путём исключения некоторых инструментов. | 1) Наличие умения читать ноты и находить их на грифе. 
2) Возможное отсутствие листов в открытом доступе
3) Поиск удобного расположения нот на гитаре может занять много времени |
| Видео уроки | Поиск гитарных гайдов. | 1) Объяснение композиции на гитаре.
2) Пояснение тонких моментов техники игры. | 1) Понимание гитарных инструкций на слух.
2) Возможное  отсутствие туториалов в открытом доступе.
3) Невозможность контролировать сложность |
| Готовые табулатуры | Использование готовых гитарных табулатур | 1) Самый легкий способ воспринимать гитарные инструкции | 1) Невозможность контролировать сложность
2) Отсутствие табулатур в открытом доступе |

****Польза от внедрения ML модели****

Решение задачи с помощью ML улучшает как качество, так и скорость работы относительно текущих сценариев бизнес процесса.

****Критерии успеха****

Решение является прототипом и будет тестироваться на ограниченной выборке пользователей.

1. Оценка на выборке пользователей >4.5
2. Среднее количество повторных генераций < 2
3. Высокое правдоподобие сгенерированных нот и удобство расстановки на грифе (добавить конкретную формулу и порог)
4. Качество на бенчмарках Music transcription должно достигать SOTA качества

## Бизнес требования и ограничения

**Целевое видение**

Проект должен представлять из себя сервис, предоставляющий пользователям возможность получать гитарную табулатуру для любой звуковой дорожки. Модель монетизации должна включать несколько вариантов возможной подписки: оплата за количество преобразованных песен и оплата в виде подписки на определенное время. Более подробно требования к сервису описаны в бизнес требованиях.

**Бизнес-требования**

1. Обработка звуковой дорожки с учетом наличия произвольного количества инструментов, звуковых техник и вокала
2. Формирование табулатуры, доступной для воспроизведения музыкантом (например, исключающей невозможную для зажатия комбинацию струн-ладов на грифе)
3. Гибкая настройка получения табулатуры, включающая следующие параметры:
    1. Уровень сложности
    2. Техника игры
    3. Drums
    4. Стиль, тональность и т.д.
4. Представление табулатуры в формате gp5 для автоматизированного воспроизведения в приложении Guitar Pro
5. Реализация веб-интерфейса приложения с возможностью авторизации и приобретения подписки
6. Возможность редактирования/повторной генерации отдельной части композиции для получения желаемого результата.

**Проведение пилота**

Тестирование решения будет проводиться на отобранной вручную выборке пользователей, при этом выборка не должна быть смещенной: в нее должны входить как опытные, так и начинающие гитаристы.

При отсутствии возможности набрать тестирующую группу решение будет считаться успешным при соблюдении всех бизнес требований и высокой оценке следующей метрики:

Близость предсказания нот + Удобство расстановки табулатуры на грифе (добавить конкретную формулу и порог)

## Что входит в скоуп проекта

### Итерация 1

**Реализуемые бизнес требования**

1. Обработка звуковой дорожки с учетом наличия произвольного количества инструментов, звуковых техник и вокала

**Что не будет закрыто**

1. Формирование табулатуры, доступной для воспроизведжения музыкантом (например, исключающей невозможную для зажатия комбинацию струн-ладов на грифе)
2. Гибкая настройка получения табулатуры, включающая следующие параметры:
    1. Уровень сложности
    2. Техника игры
    3. Стиль, тональность и т.д.

**Описание результата**

Критерии качества кода:

1. Решение воспроизводится без ошибок на тестовом датасете звуковых дорожек
2. Решение запускается на linux из командной строки

Критерии качества результата:

1. Метрики преобразования дорожки в ноты не ниже результатов существующих решений на существующих бенчмарках

### Итерация 2

**Реализуемые бизнес требования**

1. Формирование табулатуры, доступной для воспроизведения музыкантом (например, исключающей невозможную для зажатия комбинацию струн-ладов на грифе)
2. Представление табулатуры в формате gp5 для автоматизированного воспроизведения в приложении Guitar Pro
3. Реализация веб-интерфейса приложения с возможностью авторизации и приобретения подписки
4. Возможность редактирования/повторной генерации отдельной части композиции для получения желаемого результата.

**Что не будет закрыто**

1. Гибкая настройка получения табулатуры, включающая следующие параметры:
    1. Уровень сложности
    2. Техника игры
    3. Стиль, тональность и т.д.

**Описание результата**

Критерии качества кода:

1. Результат корректно воспроизводится в Guitar Pro
2. Решение работает онлайн

Критерии качества результата:

1. Высокая метрика удобства воспроизведения человеком (добавить конкретную метрику и порог)

### Итерация 3

**Реализуемые бизнес требования**

1. Гибкая настройка получения табулатуры, включающая следующие параметры:
    1. Уровень сложности
    2. Техника игры
    3. Стиль, тональность и т.д.

**Что не будет закрыто**

-

**Описание результата**

Критерии качества кода

1. Присутствует возможность настройки всех требуемых параметров

Критерии качества результата

1. Результат соответствует введенным настройкам на всех возможных их комбинациях (добавить метрику соответствия и порог)

## Предпосылки решения

Стек технологий:

- Pytorch (удобный фреймворк для проектирования глубоких моделей машинного обучения)
- Docker (контейнеризация приложения для хостинга в вебе)
- W&B (платформа для командного мониторинга экспериментов, позволяющая проводить их независимо друг от
- GitHub (Инструмент командной разработки, содержащий основные файлы проекта, схемы данных и ML DOC)
- Kaggle (Предоставляет бесплатные вычислительный ресурсы)

# Методология Data scientist

**2.1 Постановка задачи**

****2.2 Блок-схема (в приложении)****

****2.3 Этапы решения задачи****

****2.3.0 Этап 0 – Подготовка данных****

| Источник данных | Ссылка | Описание |  |  | Лицензия |
| --- | --- | --- | --- | --- | --- |
| CoCo Chorales | https://magenta.tensorflow.org/datasets/cocochorales |  |  |  |  |
|  |  |  |  |  |  |

# Подготовка пилота

# Внедрение в prodaction